(function(e){function t(t){for(var a,n,i=t[0],s=t[1],c=t[2],d=0,p=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),l()}function l(){for(var e,t=0;t<o.length;t++){for(var l=o[t],a=!0,i=1;i<l.length;i++){var s=l[i];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=l[0]))}return e}var a={},r={app:0},o=[];function n(t){if(a[t])return a[t].exports;var l=a[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=a,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(l,a,function(t){return e[t]}.bind(null,a));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=s;o.push(["01e4","vendor","styles"]),l()})({"01e4":function(e,t,l){"use strict";l.r(t);var a=l("2b0e"),r=l("5c96");l("4781");const o=l("403a");var n={install(e,t){o.keys().forEach(t=>{let l=o(t).default;e.component(l.name,l)})}},i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"app"},[e.errorMsg?l("el-alert",{attrs:{title:e.errorMsg,type:"warning",closable:!1}}):e._e(),l("div",{staticClass:"button-block"},[l("el-button",{attrs:{plain:"",type:"info"},on:{click:e.handleCreatQueryFile}},[e._v("生成查询页")]),l("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.handleCreatTypingFile}},[e._v("生成接口泛型")])],1),e.reqPathTree.length>0?l("div",{staticClass:"path-block"},[e._v("\n    选择 From 节点：\n    "),l("el-cascader",{attrs:{options:e.reqPathTree,props:{checkStrictly:!0}},model:{value:e.reqNodePath,callback:function(t){e.reqNodePath=t},expression:"reqNodePath"}}),l("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.resolveInterfaceReqInfo}},[e._v("确认")])],1):e._e(),l("tpl-form-create",{ref:"tpl-form-create",staticClass:"tpl-form-create",attrs:{initFormItem:e.interFace.queryBody,pathTree:e.reqPathTree}}),l("div",{staticClass:"path-block"},[e._v("\n    选择 Table 节点：\n    "),l("el-cascader",{attrs:{options:e.resPathTree},model:{value:e.resNodePath,callback:function(t){e.resNodePath=t},expression:"resNodePath"}}),l("el-button",{attrs:{plain:"",type:"primary"},on:{click:e.resolveInterfaceResInfo}},[e._v("确认")])],1),l("tpl-table-create",{ref:"tpl-table-create",staticClass:"tpl-table-create",attrs:{initFormItem:e.interFace.tableBody,pathTree:e.resPathTree}})],1)},s=[],c=l("4189"),u={name:"tplFormCreatePage",data(){return{interFace:{queryBody:[{key:"key1"},{key:"key2"}],tableBody:[{key:"key1"}]},isLoading:!1,errorMsg:"",apiType:"GET",reqPathTree:[],resPathTree:[],fullInterFaceInfo:{},resNodePath:[],reqNodePath:[]}},mounted(){this.doGetInterfaceInfo()},methods:{async doGetInterfaceInfo(){try{this.isLoading=!0,await this.$vscPost("getCurrInterface")}catch(e){this.errorMsg=e.message}finally{this.isLoading=!1}},async handleCreatQueryFile(){try{if(0==this.interFace.tableBody.length||0==this.interFace.queryBody.length)throw Error("数据为空无法生成");this.isLoading=!0,await this.$vscPost("saveQueryPageFile",{queryBody:this.$refs["tpl-form-create"].getFormItem(),tableBody:this.$refs["tpl-table-create"].getFormItem()}),Object(c["b"])("生成成功!")}catch(e){Object(c["a"])(e.message)}finally{this.isLoading=!1}},async handleCreatTypingFile(){try{this.isLoading=!0,await this.$vscPost("saveTypingFile"),Object(c["b"])("生成成功!")}catch(e){Object(c["a"])(e.message)}finally{this.isLoading=!1}}}},d=u,p=(l("8dff"),l("2877")),h=Object(p["a"])(d,i,s,!1,null,null,null),f=h.exports;a["default"].config.productionTip=!1;{let{postMessage:e}=l("4663");a["default"].prototype.$vscPost=e}a["default"].use(r["Button"]),a["default"].use(r["Table"]),a["default"].use(r["TableColumn"]),a["default"].use(r["Form"]),a["default"].use(r["FormItem"]),a["default"].use(r["Drawer"]),a["default"].use(r["Switch"]),a["default"].use(r["Select"]),a["default"].use(r["Option"]),a["default"].use(r["Input"]),a["default"].use(r["InputNumber"]),a["default"].use(r["Cascader"]),a["default"].use(r["Alert"]),a["default"].use(r["Loading"]),a["default"].use(n),a["default"].prototype.$ELEMENT={size:"small",zIndex:3e3};t["default"]=new a["default"]({render:e=>e(f)}).$mount("#app")},"0d77":function(e,t,l){"use strict";l("f6b8")},1367:function(e,t,l){},"13a2":function(e,t,l){"use strict";l("1367")},"1dc9":function(e,t,l){"use strict";l("2564")},2564:function(e,t,l){},"403a":function(e,t,l){var a={"./tplFormCreate/index.vue":"c790","./tplTableCreate/index.vue":"9e0d"};function r(e){var t=o(e);return l(t)}function o(e){if(!l.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="403a"},4189:function(e,t,l){"use strict";l.d(t,"c",(function(){return r})),l.d(t,"b",(function(){return o})),l.d(t,"a",(function(){return n}));var a=l("5c96");function r(){for(var e=[],t="0123456789abcdef",l=0;l<36;l++)e[l]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a}function o(e,t=3e3){Object(a["Message"])({title:"成功",message:e,type:"success",duration:t})}function n(e,t=3e3){Object(a["Message"])({title:"错误",message:e,type:"error",duration:t})}},4663:function(e,t,l){"use strict";l.r(t),l.d(t,"vscode",(function(){return r})),l.d(t,"postMessage",(function(){return i}));var a=l("4189");const r=acquireVsCodeApi();let o={};const n=12e4;window.addEventListener("message",e=>{console.log("接收到vscode信息",JSON.stringify(e.data));const{token:t,command:l,data:a}=e.data;o[t]&&("reject"==l?o[t].reject(a):o[t].resolve(a),delete o[t])});let i=(e,t)=>new Promise((l,i)=>{const s=Object(a["c"])();o[s]={resolve:l,reject:i,data:t},r.postMessage({token:s,command:e,data:t}),setTimeout(()=>{o[s]&&(o[s].reject(new Error("等待超时.")),delete o[s])},n)})},"8dff":function(e,t,l){"use strict";l("c1ab")},"9e0d":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"tpl-form-create"},[l("el-form",{attrs:{"label-width":"80px"}},[l("el-table",{ref:"table",staticClass:"ws-create-table",attrs:{"row-key":"key",border:"",data:e.formJsonArray},on:{"selection-change":e.doSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),l("el-table-column",{attrs:{label:"标题",prop:"label",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{label:"Key",prop:"key",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{label:"描述",prop:"desc",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{label:"操作",width:"80",align:"center",size:"mini"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(l){return e.handleEdit(t.row)}}})]}}])})],1)],1),l("el-drawer",{attrs:{title:"Table Cell 配置",visible:e.isDrawerShow,"append-to-body":"",size:"300"},on:{"update:visible":function(t){e.isDrawerShow=t}}},[e.isDrawerShow?l("option-dom",{model:{value:e.currEditDOM,callback:function(t){e.currEditDOM=t},expression:"currEditDOM"}}):e._e()],1)],1)},r=[],o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.value?l("div",{staticClass:"option-dom"},[l("el-form",{ref:"form",attrs:{model:e.value,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"标题"}},[l("el-input",{model:{value:e.value.label,callback:function(t){e.$set(e.value,"label",t)},expression:"value.label"}})],1),l("el-form-item",{attrs:{label:"描述"}},[l("el-input",{model:{value:e.value.desc,callback:function(t){e.$set(e.value,"desc",t)},expression:"value.desc"}})],1)],1)],1):e._e()},n=[],i={name:"optionDom",props:{value:{type:Object,default:function(){return null}}},data(){return{childTypeOption:[]}},created(){this.doInit()},watch:{"value.domType":function(){if(this.doInit(),this.childTypeOption.length>0){let e=this.childTypeOption.find(e=>e.key===this.value.childType);e||this.$set(this.value,"childType",this.childTypeOption[0].key)}}},methods:{doInit(){let e=[];"input"===this.value.domType?e=[{key:"text",label:"text"},{key:"textarea",label:"textarea"}]:"timePicker"===this.value.domType?e=[{key:"isRange[false]",label:"isRange[false]"},{key:"isRange[true]",label:"isRange[true]"}]:"datePicker"===this.value.domType&&(e=[{key:"date",label:"date"},{key:"week",label:"week"},{key:"month",label:"month"},{key:"year",label:"year"},{key:"dates",label:"dates"},{key:"daterange",label:"daterange"},{key:"monthrange",label:"monthrange"},{key:"datetime",label:"datetime"},{key:"datetimerange",label:"datetimerange"}]),this.$set(this,"childTypeOption",e),"input"===this.value.domType||"timePicker"===this.value.domType||"datePicker"===this.value.domType?this.value.hasOwnProperty("childType")||this.$set(this.value,"childType",this.childTypeOption[0].key):this.$delete(this.value,"childType"),"radio"===this.value.domType||"checkbox"===this.value.domType||"select"===this.value.domType?this.value.hasOwnProperty("slotName")||this.$set(this.value,"slotName",""):this.$delete(this.value,"slotName")}}},s=i,c=(l("0d77"),l("2877")),u=Object(c["a"])(s,o,n,!1,null,null,null),d=u.exports,p=l("aa47"),h=l("c64e"),f=l.n(h);const m={domType:"input",label:"标题",key:"key",notNull:!1,disabled:!1,showable:!0,alias:null,rule:null,maxlength:255,showFunName:"true",readonly:!1,id:"snap",bindingField:"snap",defaultRequired:!1,exportable:!0,formId:"snap"};var b={name:"TplTableCreate",components:{OptionDom:d},props:{initFormItem:{type:Array,default:null}},data(){return{isDrawerShow:!1,formJsonArray:[],currEditDOM:null,watchTableSelect:!0,jsonVisible:!1,formVisible:!1,previewForm:{}}},watch:{initFormItem:{handler(e){this.$set(this,"formJsonArray",e),this.doRowDrop(),this.initTableSelect()},deep:!0,immediate:!0}},methods:{doRowDrop(){const e=document.querySelector(".ws-create-table .el-table__body-wrapper tbody");if(e){const t=this;p["a"].create(e,{ghostClass:"blue-background-class",onEnd({newIndex:e,oldIndex:l}){const a=t.formJsonArray.splice(l,1)[0];t.formJsonArray.splice(e,0,a)}})}},handleEdit(e){this.isDrawerShow=!0,this.currEditDOM=e},handleAdd(){const e=Object.assign({},m,{key:"key"+f()()});this.formJsonArray.push(e),this.$refs["table"].toggleRowSelection(e,!0)},doSelectionChange(e){this.watchTableSelect&&(this.formJsonArray.forEach(e=>{e.showable=!1}),e.forEach(e=>{e.showable=!0}))},initTableSelect(){this.watchTableSelect=!1,this.formJsonArray.forEach(e=>{e.showable&&this.$nextTick(()=>{this.$refs["table"].toggleRowSelection(e,!0)})}),this.watchTableSelect=!0},getFormItem(){return this.formJsonArray}}},y=b,v=(l("b241"),Object(c["a"])(y,a,r,!1,null,"c3cbab7a",null));t["default"]=v.exports},b241:function(e,t,l){"use strict";l("f030")},c1ab:function(e,t,l){},c790:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"tpl-form-create"},[l("el-form",{attrs:{"label-width":"80px"}},[l("el-table",{ref:"table",staticClass:"ws-create-form",attrs:{"row-key":"key",border:"",data:e.formJsonArray},on:{"selection-change":e.doSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),l("el-table-column",{attrs:{label:"标题",prop:"label",align:"center"}}),l("el-table-column",{attrs:{width:"100",label:"Key",prop:"key",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{width:"100",label:"描述",prop:"desc",align:"center","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{width:"100",label:"类型",prop:"domType",align:"center"}}),l("el-table-column",{attrs:{width:"100",label:"子类型",prop:"domType",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.childType?t.row.childType:"---"))]}}])}),l("el-table-column",{attrs:{label:"检验规则",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.rule?t.row.rule:"---"))]}}])}),l("el-table-column",{attrs:{label:"最大长度",prop:"maxlength",align:"center"}}),l("el-table-column",{attrs:{label:"是否为空",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.notNull))]}}])}),l("el-table-column",{attrs:{label:"是否禁用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.disabled))]}}])}),l("el-table-column",{attrs:{label:"操作",width:"80",align:"center",size:"mini"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(l){return e.handleEdit(t.row)}}})]}}])})],1)],1),l("el-drawer",{attrs:{title:"From Item 配置",visible:e.isDrawerShow,"append-to-body":"",size:"300"},on:{"update:visible":function(t){e.isDrawerShow=t}}},[e.isDrawerShow?l("option-dom",{model:{value:e.currEditDOM,callback:function(t){e.currEditDOM=t},expression:"currEditDOM"}}):e._e()],1)],1)},r=[],o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return e.value?l("div",{staticClass:"option-dom"},[l("el-form",{ref:"form",attrs:{model:e.value,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"DOM 类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择DOM类型"},model:{value:e.value.domType,callback:function(t){e.$set(e.value,"domType",t)},expression:"value.domType"}},[l("el-option",{attrs:{label:"input",value:"input"}}),l("el-option",{attrs:{label:"radio",value:"radio"}}),l("el-option",{attrs:{label:"checkbox",value:"checkbox"}}),l("el-option",{attrs:{label:"select",value:"select"}}),l("el-option",{attrs:{label:"timeSelect",value:"timeSelect"}}),l("el-option",{attrs:{label:"timePicker",value:"timePicker"}}),l("el-option",{attrs:{label:"datePicker",value:"datePicker"}})],1)],1),e.childTypeOption.length>0?l("el-form-item",{attrs:{label:"子类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择DOM类型"},model:{value:e.value.childType,callback:function(t){e.$set(e.value,"childType",t)},expression:"value.childType"}},e._l(e.childTypeOption,(function(e){return l("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1)],1):e._e(),l("el-form-item",{attrs:{label:"标题"}},[l("el-input",{model:{value:e.value.label,callback:function(t){e.$set(e.value,"label",t)},expression:"value.label"}})],1),l("el-form-item",{attrs:{label:"检验规则"}},[l("el-input",{model:{value:e.value.rule,callback:function(t){e.$set(e.value,"rule",t)},expression:"value.rule"}})],1),"input"===e.value.domType?l("el-form-item",{attrs:{label:"最大长度"}},[l("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,precision:0},model:{value:e.value.maxlength,callback:function(t){e.$set(e.value,"maxlength",t)},expression:"value.maxlength"}})],1):e._e(),l("el-form-item",{attrs:{label:"是否为空"}},[l("el-switch",{model:{value:e.value.notNull,callback:function(t){e.$set(e.value,"notNull",t)},expression:"value.notNull"}})],1),l("el-form-item",{attrs:{label:"是否禁用"}},[l("el-switch",{model:{value:e.value.disabled,callback:function(t){e.$set(e.value,"disabled",t)},expression:"value.disabled"}})],1)],1)],1):e._e()},n=[],i={name:"optionDom",props:{value:{type:Object,default:function(){return null}}},data(){return{childTypeOption:[]}},created(){this.doInit()},watch:{"value.domType":function(){if(this.doInit(),this.childTypeOption.length>0){let e=this.childTypeOption.find(e=>e.key===this.value.childType);e||this.$set(this.value,"childType",this.childTypeOption[0].key)}}},methods:{doInit(){let e=[];"input"===this.value.domType?e=[{key:"text",label:"text"},{key:"textarea",label:"textarea"}]:"timePicker"===this.value.domType?e=[{key:"isRange[false]",label:"isRange[false]"},{key:"isRange[true]",label:"isRange[true]"}]:"datePicker"===this.value.domType&&(e=[{key:"date",label:"date"},{key:"week",label:"week"},{key:"month",label:"month"},{key:"year",label:"year"},{key:"dates",label:"dates"},{key:"daterange",label:"daterange"},{key:"monthrange",label:"monthrange"},{key:"datetime",label:"datetime"},{key:"datetimerange",label:"datetimerange"}]),this.$set(this,"childTypeOption",e),"input"===this.value.domType||"timePicker"===this.value.domType||"datePicker"===this.value.domType?this.value.hasOwnProperty("childType")||this.$set(this.value,"childType",this.childTypeOption[0].key):this.$delete(this.value,"childType"),"radio"===this.value.domType||"checkbox"===this.value.domType||"select"===this.value.domType?this.value.hasOwnProperty("slotName")||this.$set(this.value,"slotName",""):this.$delete(this.value,"slotName")}}},s=i,c=(l("1dc9"),l("2877")),u=Object(c["a"])(s,o,n,!1,null,null,null),d=u.exports,p=l("aa47"),h=l("c64e"),f=l.n(h);const m={domType:"input",label:"标题",key:"key",notNull:!1,disabled:!1,showable:!0,alias:null,rule:null,maxlength:255,showFunName:"true",readonly:!1,id:"snap",bindingField:"snap",defaultRequired:!1,exportable:!0,formId:"snap"};var b={name:"TplFormCreate",components:{OptionDom:d},props:{initFormItem:{type:Array,default:null}},data(){return{isDrawerShow:!1,formJsonArray:[],currEditDOM:null,watchTableSelect:!0,jsonVisible:!1,formVisible:!1,previewForm:{}}},watch:{initFormItem:{handler(e){this.$set(this,"formJsonArray",e),this.doRowDrop(),this.initTableSelect()},deep:!0,immediate:!0}},methods:{doRowDrop(){const e=document.querySelector(".ws-create-form .el-table__body-wrapper tbody");if(e){const t=this;p["a"].create(e,{ghostClass:"blue-background-class",onEnd({newIndex:e,oldIndex:l}){const a=t.formJsonArray.splice(l,1)[0];t.formJsonArray.splice(e,0,a)}})}},handleEdit(e){this.isDrawerShow=!0,this.currEditDOM=e},handleAdd(){const e=Object.assign({},m,{key:"key"+f()()});this.formJsonArray.push(e),this.$refs["table"].toggleRowSelection(e,!0)},doSelectionChange(e){this.watchTableSelect&&(this.formJsonArray.forEach(e=>{e.showable=!1}),e.forEach(e=>{e.showable=!0}))},initTableSelect(){this.watchTableSelect=!1,this.formJsonArray.forEach(e=>{e.showable&&this.$nextTick(()=>{this.$refs["table"].toggleRowSelection(e,!0)})}),this.watchTableSelect=!0},getFormItem(){return this.formJsonArray}}},y=b,v=(l("13a2"),Object(c["a"])(y,a,r,!1,null,"5d501c62",null));t["default"]=v.exports},f030:function(e,t,l){},f6b8:function(e,t,l){}});